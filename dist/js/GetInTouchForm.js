let isChatBotOpen=!1,sessionID=null,timeOutID=null;function sessionTimeOut(){timeOutID=setTimeout(function(){sessionID=null,isChatBotOpen&&null===sessionID&&getNewSession()},3e5)}function getNewSession(){fetch("https://pure-tor-36404.herokuapp.com/session").then(function(e){return document.getElementById("userText").setAttribute("disabled",!0),document.querySelector(".sendBtn").setAttribute("disabled",!0),document.querySelector(".sendBtn").innerHTML='<span class="spinner-border spinner-border-sm text-white" role="status">\n    <span class="sr-only">Loading...</span></span>',e.json()}).then(function(e){sessionID=e.session}).then(function(){document.getElementById("userText").removeAttribute("disabled"),document.querySelector(".sendBtn").removeAttribute("disabled"),document.getElementById("userText").focus(),document.querySelector(".sendBtn").innerHTML=' <i class="fas fa-paper-plane text-white"></i>',timeOutID&&clearTimeout(timeOutID),sessionTimeOut()})}function show(e){0==e?(document.getElementById("box1").style.display="none",isChatBotOpen=!1):(document.getElementById("box1").style.display="inline",document.getElementById("userText").focus(),isChatBotOpen=!0,null===sessionID&&getNewSession())}let messagesElement=document.getElementById("botMessages");document.getElementById("bot-form").addEventListener("submit",function(e){e.preventDefault(),e.stopPropagation();let t=document.getElementById("userText").value;""!==t&&sessionID&&(messagesElement.innerHTML+=`<p id="userReplay">${t}</p>`,document.getElementById("userText").setAttribute("disabled",!0),document.querySelector(".sendBtn").setAttribute("disabled",!0),document.querySelector(".sendBtn").innerHTML='<span class="spinner-border spinner-border-sm text-white" role="status">\n  <span class="sr-only">Loading...</span></span>',document.getElementById("userText").value="",fetch("https://pure-tor-36404.herokuapp.com/virtech",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({text:t,session_id:sessionID})}).then(function(e){return document.getElementById("userText").value="",e.json()}).then(function(e){if(e[0]&&(e[0].text&&(messagesElement.innerHTML+=`<p id="botReplay">${e[0].text}</p>`),e[0].title&&(messagesElement.innerHTML+=`<p id="botReplay">${e[0].title}</p>`),e[0].description&&(messagesElement.innerHTML+=`<p id="botReplay">${e[0].description}</p>`),e[0].options)){let t='<p id="botReplay"> ';t+=e[0].options.map(function(e){return e.value.input.text}).join(", "),t+="</p>",messagesElement.innerHTML+=t}}).then(function(){let e=document.getElementById("userText");e.removeAttribute("disabled"),document.querySelector(".sendBtn").removeAttribute("disabled"),document.querySelector(".sendBtn").innerHTML=' <i class="fas fa-paper-plane text-white"></i>',e.focus()}).then(function(){let e=document.getElementById("scroll");e.scrollTop=e.scrollHeight}).catch(function(e){console.log(e)}))});